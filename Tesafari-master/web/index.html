<!DOCTYPE html><html lang="en"><head>
  <!--
    If you are serving your web app in a path other than the root, change the
    href value below to reflect the base path you are serving from.

    The path provided below has to start and end with a slash "/" in order for
    it to work correctly.

    For more details:
    * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base
  -->
  <base href="/">

  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="A new Flutter project.">

  <!-- iOS meta tags & icons -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="tesafari">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">

  <title>tesafari</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" type="text/css" href="splash/style.css">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
  <script src="splash/splash.js"></script>
</head>
<body>  <picture id="splash">
      <source srcset="splash/img/light-1x.png 1x, splash/img/light-2x.png 2x, splash/img/light-3x.png 3x, splash/img/light-4x.png 4x" media="(prefers-color-scheme: light)">
      <source srcset="splash/img/dark-1x.png 1x, splash/img/dark-2x.png 2x, splash/img/dark-3x.png 3x, splash/img/dark-4x.png 4x" media="(prefers-color-scheme: dark)">
      <img class="center" aria-hidden="true" src="splash/img/light-1x.png" alt="">
  </picture>
  

  <!-- This script installs service_worker.js to provide PWA functionality to
        application. For more information, see:
        https://developers.google.com/web/fundamentals/primers/service-workers -->
  
  <script>
    let useHtml = true;

    if(useHtml){
      window.flutterWebRenderer = "html";
    }
    else{
      window.flutterWebRenderer = "canvaskit";
    }

  </script>

  <script>
    var serviceWorkerVersion = null;
    var scriptLoaded = false;
    function loadMainDartJs() {
      if (scriptLoaded) {
        return;
      }
      scriptLoaded = true;
      var scriptTag = document.createElement('script');
      scriptTag.src = 'main.dart.js';
      scriptTag.type = 'application/javascript';
      document.body.append(scriptTag);
    }

    if ('serviceWorker' in navigator) {
      // Service workers are supported. Use them.
      window.addEventListener('load', function () {
        // Wait for registration to finish before dropping the <script> tag.
        // Otherwise, the browser will load the script multiple times,
        // potentially different versions.
        // var serviceWorkerUrl = 'flutter_service_worker.js?v=' + serviceWorkerVersion;
        // navigator.serviceWorker.register(serviceWorkerUrl)
        //   .then((reg) => {
        //     function waitForActivation(serviceWorker) {
        //       serviceWorker.addEventListener('statechange', () => {
        //         if (serviceWorker.state == 'activated') {
        //           console.log('Installed new service worker.');
        //           loadMainDartJs();
        //         }
        //       });
        //     }
        //     if (!reg.active && (reg.installing || reg.waiting)) {
        //       // No active web worker and we have installed or are installing
        //       // one for the first time. Simply wait for it to activate.
        //       waitForActivation(reg.installing ?? reg.waiting);
        //     } else if (!reg.active.scriptURL.endsWith(serviceWorkerVersion)) {
        //       // When the app updates the serviceWorkerVersion changes, so we
        //       // need to ask the service worker to update.
        //       console.log('New service worker available.');
        //       reg.update();
        //       waitForActivation(reg.installing);
        //     } else {
        //       // Existing service worker is still good.
        //       console.log('Loading app from service worker.');
        //       loadMainDartJs();
        //     }
        //   });

        // If service worker doesn't succeed in a reasonable amount of time,
        // fallback to plaint <script> tag.
        setTimeout(() => {
          if (!scriptLoaded) {
            console.warn(
              'Failed to load app from service worker. Falling back to plain <script> tag.',
            );
            loadMainDartJs();
          }
        }, 4000);
      });
    } else {
      // Service workers not supported. Just drop the <script> tag.
      loadMainDartJs();
    }
  </script>

  <!-- <script>
    importScripts('https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js');
    importScripts('https://www.gstatic.com/firebasejs/8.6.1/firebase-messaging.js');
    firebase.initializeApp({
      apiKey: "AIzaSyDW87TimoSkG2ti6nzomMdF8_Fshns3gzo",
      projectId: "tesafari-ef160",
      messagingSenderId: "549842403651-q8ph0bg4fk97r8lb2l529dsp7egus22s.apps.googleusercontent.com",
      appId: "1:549842403651:android:07a0b4dc9585b2dea3eff6",
      storage_bucket: "tesafari-ef160.appspot.com",
    });
    
    const messaging = firebase.messaging();
    messaging.usePublicVapidKey('BO5rX7o06TMKpUMT5MefonL5PCMkBeN-Y6dFjqhUHwa0TQdX-x7-9QL7Tlh5jxNTJMZJrN2VmUIJiX3C-pDh-8Y');
    
    Notification.requestPermission().then((permission) => {
              if (permission === 'granted') {
                navigator.serviceWorker.register('firebase-messaging-sw.js')
                console.log('Notification permission granted.');
                    messaging.getToken().then((currentToken) => {
                      if (currentToken) {
                        console.log(currentToken);
                      } else {
                        // Show permission request.
                        console.log('No Instance ID token available. Request permission to generate one.');

                      }
                    }).catch((err) => {
                      console.log('An error occurred while retrieving token. ', err);
                    });
              } else {
                console.log('Unable to get permission to notify.');
              }
            });
  </script> -->


</body></html>